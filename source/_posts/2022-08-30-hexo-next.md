---
title: hexo next
date: 2022-08-30 15:51:07
tags: [hexo,hexo blog]
categories: hexo
---

# å¼•è¨€

<b>æ­¤åšå®¢ç”¨äºæ­å»º hexo next ä¸»é¢˜çš„å­—å…¸å·¥å…·ç±»åšå®¢.åŸºæœ¬ä¸ä¼šæ¢ç´¢æ·±ç©¶é…ç½®çš„åŸå› ,æ•¬è¯·çŸ¥æ‚‰~</b>

# hexo å®‰è£…

> æ­¥éª¤

é¦–å…ˆè¦ç”¨ npm èµ„æºä¾èµ–ç®¡ç†å·¥å…·å®‰è£…å…¨å±€å‘½ä»¤ hexo-cli.

    npm install hexo-cli -g

ç„¶åä½¿ç”¨ hexo åˆå§‹åŒ–åšå®¢ç›®å½•,æ¯”å¦‚ blog ç›®å½•,ç›®å½•åè¦ä¸åç»­ä¸ªäººå»ºç«‹çš„ github ä¸Š hexo æ‰˜ç®¡ä»£ç çš„ repository åº“åŒå.

    hexo init blog

æ¥ç€ github å»ºåº“: å»ºç«‹ä¸€ä¸ªä»¥ w-t-w(æˆ‘çš„è´¦å·).github.io ç»“å°¾çš„ repository åº“,ä½œä¸º hexo æ‰˜ç®¡ä»£ç çš„åº“, github é»˜è®¤
.github.io ç»“å°¾ä½œä¸ºç”¨æˆ·çš„ç½‘ç«™äºŒçº§åŸŸå,å»ºç«‹ä¸€ä¸ªæ–°çš„åˆ†æ”¯ä½œä¸ºåˆ›ä½œåˆ†æ”¯(å› ä¸ºä¸»åˆ†æ”¯æ˜¯ç”¨æ¥å‘å¸ƒå‘ˆç°ç½‘ç«™çš„); ä¹‹å,è¿›å…¥ç”Ÿæˆçš„ blog
æ–‡ä»¶å¤¹,åœ¨æœ¬åœ°æ·»åŠ ä¸è¿œç¨‹ repository åº“é“¾æ¥å…³è”çš„å¥æŸ„ç®€ç§°,å¹¶è®¾ç½®æœ¬åœ°å¥æŸ„ç®€ç§°æ¨é€/åŒæ­¥è¿œç¨‹åº“ä¸Šæ¸¸çš„åˆ†æ”¯,ä¸è¿œç¨‹åº“å»ºç«‹å®‰å…¨å…³è”,æœ€ååŒæ­¥è¿œç¨‹æœ€æ–°èµ„æº.

    git remote add origin git@github.com:w-t-w/w-t-w.github.io.git
    git pull --set-upstream origin master

å† npm ä¸‹è½½å¤–éƒ¨èµ„æºä¾èµ–åŒ….

    npm i/npm install

æˆ–è€…ä½¿ç”¨ yarn ä¸‹è½½å¤–éƒ¨èµ„æºä¾èµ–åŒ….

    yarn

æœ€åå¯åŠ¨ hexo è‡ªèº«æ­å»ºçš„æœåŠ¡,ç”Ÿæˆæœ¬åœ°çš„åšå®¢ç½‘ç«™æœåŠ¡,é»˜è®¤ç«¯å£åœ¨æœ¬åœ° ip åœ°å€ä¸‹çš„ 4000 ç«¯å£,å‡å¦‚ä½ ä¸æƒ³å¯åŠ¨åœ¨ 4000 ç«¯å£,ä¹Ÿå¯ä½¿ç”¨-p
å…¶ä»–ç«¯å£å·è¿›è¡Œé…ç½®,æ¯”å¦‚-p 9777.

    hexo server
    hexo server -p 9777

PS: æœ€å¥½å…ˆå°†æœ¬åœ°ä»£ç ä¸Šä¼ è‡³è¿œç¨‹ä¹‹å,å†æ‰§è¡Œ hexo é…ç½®.

    git add .
    git commit 'build:hexo next'
    git push

é»˜è®¤çš„ä¸»é¢˜é£æ ¼ theme æ˜¯ landscape
,å‡å¦‚ä½ æƒ³æ›´æ¢,å¯ä»¥é€šè¿‡<a href='https://hexo.io/themes/'>https://hexo.io/themes</a>è¿›è¡Œç­›é€‰,ç­›é€‰ä¹‹åè¿›è¡Œé…ç½®,ä¸»é¢˜é…ç½®è§ä¸‹æ–‡
.

# hexo é…ç½®

PS: ä»¥ä¸‹æ‰€è¯´çš„"æ ¹ç›®å½•"æŒ‡çš„å°±æ˜¯å½“å‰åˆ›ä½œçš„ repository ç›®å½•,"ä¸»é¢˜ç›®å½•"å°±æ˜¯æ ¹ç›®å½•ä¸‹/themesç›®å½•ä¸‹çš„ä¸»é¢˜ç¯å¢ƒ.

#### hexo deploy å‘å¸ƒé…ç½®

å‘å¸ƒéƒ¨ç½²å¯ä»¥éƒ¨ç½²è‡³ Github Page ä¸ªäººç½‘ç«™,ä¹Ÿå¯ä»¥éƒ¨ç½²è‡³ä¸ªäººç”³è¯·è´­ä¹°çš„äº‘æœåŠ¡å™¨ä¸­.

ä¸€. éƒ¨ç½²è‡³ Github Page ä¸ªäººç½‘ç«™.

> æ­¥éª¤

è¦æƒ³éƒ¨ç½²åˆ° Github Page ä¸ªäººç½‘ç«™,é¦–å…ˆè¦ä¸‹è½½ hexo-deployer-git æ’ä»¶.

    npm install hexo-deployer-git --save

ç„¶ååœ¨æ ¹ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶ä¸­æ›´æ”¹ deploy å‘å¸ƒé…ç½®,å°† source ç›®å½•ä¸‹é¢çš„å†…å®¹è¿›è¡Œæ„å»ºå‘å¸ƒåˆ° repository github
åœ°å€çš„ä¸»åˆ†æ”¯ä¸Š.

    deploy:
        type: git
        #ä½ çš„ä¸ªäººç½‘ç«™ github åº“çš„é“¾æ¥åœ°å€,æœ€å¥½ä½¿ç”¨ git@ å¼€å¤´çš„, https@ å¼€å¤´çš„ä¼šæŠ¥é”™
        repo: git@github.com:w-t-w/w-t-w.github.io.git
        #åˆ†æ”¯å
        branch: master

äºŒ. éƒ¨ç½²è‡³ä¸ªäººç”³è¯·è´­ä¹°çš„äº‘æœåŠ¡å™¨.

> æ­¥éª¤

å°†ç”Ÿæˆçš„ç½‘ç«™åšå®¢é¡¹ç›®ç›´æ¥é€šè¿‡ <a href='https://filezilla-project.org' />Filezilla</a> è¿œç¨‹æœåŠ¡æ–‡ä»¶ä¼ è¾“å·¥å…·æ”¾å…¥äº‘æœåŠ¡å™¨ä¸­;æ¥ç€é€šè¿‡ <a href='https://macwk.com/soft/royal-tsx'>Royal TSX(ç ´è§£ç‰ˆğŸ˜œ)</a> è¿œç¨‹æœåŠ¡ç®¡ç†å·¥å…·å¯¹æœåŠ¡å™¨è¿›è¡Œæ·±åº¦ç®¡ç†,é“¾æ¥æˆåŠŸå,ä¸‹è½½ nginx ä»£ç†.

    # æˆ‘è¿™é‡Œç›´æ¥ä½¿ç”¨é˜¿é‡Œäº‘CentOSæœåŠ¡å™¨ä¸­é»˜è®¤çš„åŸºäºRPMçš„è½¯ä»¶åŒ…ç®¡ç†å™¨yumæ¥ä¸‹è½½nginx
    yum install nginx

ä¸‹è½½ä¹‹åæŸ¥çœ‹å…¨å±€å‘½ä»¤ nginx æ˜¯å¦å­˜åœ¨,æŸ¥çœ‹ nginx çš„ç‰ˆæœ¬.

    nginx -v

å¦‚æœå…¨å±€å‘½ä»¤ä¸å­˜åœ¨ nginx,åˆ™è¿è¡Œ source ~/.bash_profile,ä½¿å¾—é…ç½®åœ¨ä¿®æ”¹äº†ç¯å¢ƒå˜é‡çš„æƒ…å†µä¸‹è¿›è¡Œé‡ç½®.

    source ~/.bash_profile

å¯åŠ¨ nginx.

    nginx

- é¡ºä¾¿æä¸€ä¸‹ nginx çš„å…¶ä»–å‘½ä»¤.é‡å¯ nginx.

      nginx -s reload

- åœæ­¢ nginx.

      nginx -s stop

- é€šè¿‡æµ(pipe)æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·ç»„ nginx å®Œæ•´çš„è¿›ç¨‹çŠ¶æ€.

      ps -ef | grep nginx

- å¼ºåˆ¶æ€æ‰ nginx è¿›ç¨‹.

      #28009æ˜¯ nginx è¿›ç¨‹å·,é€šè¿‡ ps -ef | grep nginx å¯ä»¥æŸ¥è¯¢åˆ°
      kill -9 28009

é…ç½® nginx,å°†æœåŠ¡å™¨ä»£ç† root é¡µé¢æŒ‡å‘æˆ‘ä»¬çš„åšå®¢ç½‘ç«™.

    #é€šè¿‡æµ‹è¯• nginx,æŸ¥è¯¢ nginx é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•
    nginx -t
    vim /etc/nginx/nginx.conf

  ```shell
    #...
    server {
        listen       80 default_server;
        listen       [::]:80 default_server;
        #åŸŸåé…ç½®,éœ€è¦ç”³è¯·è´­ä¹°å¤‡æ¡ˆ(å›½å†…åŸŸåéœ€è¦å¤‡æ¡ˆ,å›½å¤–åŸŸååˆ™ä¸éœ€è¦)
        server_name  localhost;
        #ä¿®æ”¹rooté¡µé¢å‘æˆ‘ä»¬çš„ç½‘ç«™åšå®¢é¡¹ç›®
        root         /root/w-t-w;

        # Load configuration files for the default server block.
        include /etc/nginx/default.d/*.conf;

        location / {
            index index.html index.htm;
            # å°† router è·¯ç”±ä¸­ä¸å­˜åœ¨çš„é¡µé¢é‡å®šå‘è‡³ index.html.
            try_files $uri $uri/ /index.html;
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }
    #...
  ```

#### hexo theme ä¸»é¢˜é…ç½®

> ç¤ºä¾‹

ç­›é€‰å¥½ä¸ªäººé€‰ä¸­çš„ä¸»é¢˜ä¹‹å,å°±éœ€è¦åœ¨é¡¹ç›®é‡Œé¢è¿›è¡Œé…ç½®æ›´æ¢ã€‚é¦–å…ˆéœ€è¦ä¸‹è½½è¿œç¨‹ github åº“é‡Œé¢çš„ä¸»é¢˜é¡¹ç›®åˆ°é¡¹ç›®æ ¹ç›®å½•é‡Œé¢çš„ themes
æ–‡ä»¶å¤¹åº•ä¸‹,æ¯”å¦‚æœ¬äººç”¨çš„æ˜¯ next ä¸»é¢˜çš„ hexo.

    # æ³¨æ„ hexo 6.x ä¹‹å‰ä¸‹è½½ next ä¸»é¢˜è¿œç¨‹ github é“¾æ¥ä¸ hexo 6.x ä¹‹åä¸åŒ!
    # hexo 6.x ä¹‹å‰
    git clone https://github.com/iissnan/hexo-theme-next.git themes/next
    # hexo 6.x ä¹‹å
    git clone https://github.com/theme-next/hexo-theme-next themes/next

<img src='https://image.white-than-wood.zone/hexo/next_theme.png' style='width: 100%; height: auto;'/>

éšååœ¨æ ¹ç›®å½•é‡Œé¢çš„ _config.yml æ–‡ä»¶ä¸­æ›´æ”¹ theme é…ç½®.

    theme: next

æ¥ç€é€‰æ‹©ä¸»é¢˜å±•ç¤ºçš„æ–¹å¼,éœ€è¦åœ¨ä¸»é¢˜ç›®å½•ä¸‹,åœ¨ _config.yml æ–‡ä»¶ä¸­æ›´æ”¹ Scheme é…ç½®,æ¯”å¦‚ next ä¸»é¢˜åº•ä¸‹çš„ Scheme é…ç½®.

    scheme:
        #scheme: Muse
        #scheme: Mist
        scheme: Pisces
        #scheme: Gemini

#### hexo language è¯­è¨€é…ç½®

> æ­¥éª¤

æ¯ä¸ªä¸»é¢˜çš„è¯­è¨€éƒ½æ˜¯æ ¹æ®åšå®¢ä½œè€…çš„æ¯è¯­æ¥é…ç½®çš„,è¦æƒ³é…ç½®å¼€å‘è€…ä¸ªäººå›½å®¶çš„è¯­è¨€,è¿˜æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶ä¸­æ›´æ”¹
language é…ç½®.

    language: zh-CN

å†åœ¨ä¸»é¢˜ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶ä¸­æ›´æ”¹ language é…ç½®.

    language: zh-CN

#### hexo page é¡µé¢é…ç½®

> æ­¥éª¤

hexo æä¾›äº†å‡ ä¸ªå¯ä¾›ç­›é€‰çš„é¡µé¢,å¸¸ç”¨çš„æœ‰è¿™ä¹ˆå‡ ä¸ªï¼šhome(é¦–é¡µ)ã€tags(æ ‡ç­¾)ã€about(å…³äºæˆ‘)ã€archives(æ¡£æ¡ˆ)å’Œcategories(åˆ†ç±»)
,é¦–å…ˆè¦åˆ›å»ºé¡µé¢.

    hexo new page tags
    hexo new page about
    hexo new page archives
    hexo new page categories

æ¥ç€åœ¨ä¸»é¢˜ç›®å½•ä¸‹,åœ¨ _config.yml æ–‡ä»¶ä¸­æ›´æ”¹ menu é…ç½®,å½“ç„¶æ¯ä¸ªä¸»é¢˜çš„é…ç½®ä¸å°½ç›¸åŒ.

    menu:
        home: / || fa fa-home
        about: /about/ || fa fa-user
        tags: /tags/ || fa fa-tags
        categories: /categories/ || fa fa-th
        archives: /archives/ || fa fa-archive

éšåæ›´æ”¹ source ç›®å½•åº•ä¸‹åˆ›å»ºçš„é¡µé¢é…ç½®,ä»¥ tags ä¸ºä¾‹.

    ----------------------------
        title: æ ‡ç­¾
        date: 2018-04-24 17:57:26
        type: "tags"
        comments: false
    ----------------------------

#### hexo avatar å¤´åƒé…ç½®

> æ­¥éª¤

é…ç½®ä¸ªäººåšå®¢ç½‘ç«™çš„å¤´åƒ,éœ€è¦æ›´æ”¹ä¸»é¢˜ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶,æ·»åŠ  avatar é…ç½®.

    #å¤´åƒurlé“¾æ¥
    avatar: https://avatars.githubusercontent.com/u/112366447?v=4

#### hexo search å…¨ç«™æœç´¢é…ç½®

> æ­¥éª¤

å‡å¦‚æƒ³è¦é…ç½® hexo ä¸ªäººåšå®¢ç½‘ç«™çš„å…¨ç«™æœç´¢é…ç½®,é¦–å…ˆè¦ä¸‹è½½ hexo search å¤–éƒ¨ä¾èµ–åŒ….

    npm install hexo-generator-search --save
    npm install hexo-generator-searchdb --save

æ›´æ”¹æ ¹ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶,æ·»åŠ  search é…ç½®.

    search:
        path: search.xml
        field: post
        format: html
        limit: 10000

å¼€å¯ä¸»é¢˜ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶ä¸­çš„ local_search é…ç½®.

    local_search:
        enable: true

#### hexo åšå®¢æ–‡ä»¶é…ç½®

> æ­¥éª¤

å‡å¦‚æƒ³è¦æ›´æ”¹æ¯ä¸€ç¯‡åšå®¢çš„æ–‡ä»¶åç§°,ä¸å†æ˜¯é»˜è®¤çš„:title.mdçš„æ–‡ä»¶å,éœ€è¦åœ¨æ ¹ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶ä¸­æ›´æ”¹ new_post_name
é…ç½®.

    new_post_name: :year-:month-:day-:title.md

#### hexo auto_excerpt é˜…è¯»å…¨æ–‡é…ç½®

> æ­¥éª¤

åšå®¢æ–‡ç« ä¸€èˆ¬éƒ½ä¼šå¾ˆé•¿çš„,æ‰€ä»¥åœ¨é¦–é¡µè¦å¯¹åšå®¢è¿›è¡Œè¶…é•¿çœç•¥,è¦æƒ³çœ‹æ‰€æœ‰çš„å†…å®¹,ç‚¹å‡»é˜…è¯»å…¨æ–‡æˆ–è€…æ–‡ç« æ ‡é¢˜è¿›å…¥å…¨æ–‡æŸ¥çœ‹.åœ¨
hexo-theme-next ä¸»é¢˜ç‰ˆæœ¬ 7.6 ä¹‹å‰éœ€è¦å†ä¸»é¢˜ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶ä¸­æ›´æ”¹ auto_excerpt é…ç½®.

    auto_excerpt:
        enable: true
        length: 200

åœ¨ hexo-theme-next ä¸»é¢˜ç‰ˆæœ¬ 7.6 ä¹‹å,ç”±äº auto_excerpt
è¿™ç§è¶…é•¿çœç•¥ä¸åº”è¯¥æ˜¯ä¸»é¢˜æ’ä»¶åº”è¯¥åšçš„,ä½œè€…å°†æ­¤é…ç½®ç§»é™¤,å¹¶ç»™å‡ºæ–°çš„ä¸“é—¨é’ˆå¯¹æ­¤é…ç½®çš„æ’ä»¶ <a href='https://github.com/chekun/hexo-excerpt'>
hexo-excerpt</a>.

![](https://image.white-than-wood.zone/hexo/remove_auto_excerpt.png)

    excerpt:
        #æ˜¾ç¤ºçš„ markdown ä»£ç å—å±‚æ•°
        depth: 5
        excerpt_excludes: []
        more_excludes: []
        #è®¾ç½®ä¸ºtrue: æ˜¾ç¤ºè¶…é•¿çœç•¥,åªå±•ç¤ºéƒ¨åˆ†,éšè—å…¨æ–‡
        #è®¾ç½®ä¸ºfalse: å±•ç¤ºå…¨æ–‡
        hideWholePostExcerpts: true
        excerpt_description: true
        #æ˜¯å¦æ˜¾ç¤ºé˜…è¯»å…¨æ–‡æŒ‰é’®
        read_more_btn: true

#### hexo browsersync çƒ­åŠ è½½é…ç½®

> æ­¥éª¤

åœ¨åˆ›ä½œåšå®¢æ—¶,éœ€è¦æ¯æ¬¡æ‰‹åŠ¨åˆ·æ–°é¡µé¢æ‰èƒ½çœ‹åˆ°ä¿®æ”¹åçš„ç»“æœ,æ„Ÿè§‰éå¸¸æ²¡æœ‰æ•ˆç‡,å¦‚æœå­˜åœ¨ç±»hrmçƒ­åŠ è½½è¿™ç§æ’ä»¶å°±å¤ªçˆ½äº†! <a href='https://github.com/hexojs/hexo-browsersync'>
hexo-browsersync</a> å¯ä»¥ç›´æ¥è§£å†³è¿™ä¸ªé—®é¢˜.

    npm install hexo-browsersync --save

æ­¤æ’ä»¶åŸç†åŸºäº browser-sync ,ä¸ hexo å»ºç«‹å…³è”,å½“åˆ›ä½œçš„æ–‡ä»¶å†…å®¹å‘ç”Ÿæ”¹å˜æ—¶, browser-sync
å°±ä¼šç›‘å¬åˆ°å¹¶åˆ·æ–°æµè§ˆå™¨æ•´ä¸ªé¡µé¢çš„å†…å®¹,åšåˆ°ä¸éœ€æ‰‹åŠ¨åˆ·æ–°,å¤§å¤§æé«˜äº†åˆ›ä½œæ•ˆç‡.

    #æ›´æ”¹æ ¹ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶,æ·»åŠ  browsersync å±æ€§
    #è®¾ç½®ç›‘å¬ watch å±æ€§ä¸º true å°±å¯ä»¥äº†!
    browsersync:
        watch: true
        logLevel: "warn"

#### hexo busuanzi_count åœç®—å­ç»Ÿè®¡é…ç½®

> æ­¥éª¤

ä¸Šçº¿ä¹‹å,éœ€è¦å¯¹ä¸ªäººåšå®¢è¿›è¡Œç®¡ç†,é˜…è¯»äººæ•°ä»¥åŠæ¬¡æ•°å¯¹äºåˆ›ä½œè€…æ¥è¯´æ˜¯å¾ˆé‡è¦åé¦ˆç‚¹.ç»Ÿè®¡é…ç½®éœ€è¦æ›´æ”¹ä¸»é¢˜ç›®å½•åº•ä¸‹çš„ _config.yml
æ–‡ä»¶,é…ç½® busuanzi_count åœç®—å­ç»Ÿè®¡.

    #å¯é…ç½®æŸ¥çœ‹ä¸ªäººåšå®¢çš„é˜…è¯»äººæ•°ã€æ¬¡æ•°ä»¥åŠæ¯ç¯‡åšå®¢æ–‡ç« çš„æ¬¡æ•°
    busuanzi_count:
        enable: true
        total_visitors: true
        total_visitors_icon: fa fa-user
        total_views: true
        total_views_icon: fa fa-eye
        post_views: true
        post_views_icon: fa fa-eye

#### hexo baidu_analyticsç™¾åº¦ç»Ÿè®¡é…ç½®

> æ­¥éª¤

åœç®—å­ç»Ÿè®¡æœ‰æ—¶å€™ä¼šå‡ºç°ä¸€äº›å¼‚å¸¸,æ¯”å¦‚pvè«åä¼šåŠ 100,uvä¸å†åŒºåˆ†å•ä¸ªip.ä¸ºäº†è¿½æ±‚æ›´ç²¾ç¡®ã€æ›´æ™ºèƒ½,æˆ‘ä»¬é‡‡ç”¨ç™¾åº¦ç»Ÿè®¡.
ç»Ÿè®¡é…ç½®éœ€è¦æ›´æ”¹ä¸»é¢˜ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶,é…ç½® baidu_analytics ç™¾åº¦ç»Ÿè®¡.

æ ¹æ®<a href='https://tongji.baidu.com/main/setting/10000339309/home/site/getjs?siteId=18040501'>
ç™¾åº¦ç»Ÿè®¡-ä½¿ç”¨é…ç½®-ä»£ç è·å–</a>,å°† hm.js åæ–¹è‡ªåŠ¨ç”Ÿæˆçš„ id é…ç½®è‡³ baidu_analytics.

![](https://image.white-than-wood.zone/hexo/baidu_analytics.png)

    # Baidu Analytics
    # See: https://tongji.baidu.com
    baidu_analytics: 31f07c2ec89d10385ec28e8eea5bbc3a

#### hexo Gitalkç•™è¨€æ¿é…ç½®

> æ­¥éª¤

ç•™è¨€æ¿ comments æ˜¯åˆ›ä½œè€…ä¸é˜…è¯»è€…è¿›è¡Œäº’åŠ¨åé¦ˆçš„çª—å£,å¯ä»¥ä½¿é˜…è¯»è€…ä¸åˆ›ä½œè€…å…±åŒè¿›æ­¥.å¯¹äº hexo æ¥è¯´,æ”¯æŒçš„ç•™è¨€æ¿æ¨¡å¼æœ‰å¾ˆå¤šç§: 'disqus | disqusjs | changyan | livere | gitalk | utterances',æ¯”è¾ƒå¸¸è§ã€ç”¨æˆ·é‡æ¯”è¾ƒå¤§ä¸”ä¸ github å…³è”æ€§æ¯”è¾ƒå¼ºçš„å°±æ˜¯ gitalk ä»¥åŠ disqus,disqusjs éœ€è¦'æ¢¯å­'ğŸ¶æ‰èƒ½è¯„è®º,é‚£ä¹ˆè¿˜æ˜¯é€‰ç”¨ gitalk .ç•™è¨€æ¿é…ç½®éœ€è¦æ›´æ”¹ä¸»é¢˜ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶.

é…ç½®comments:

    # Multiple Comment System Support
    comments:
        # Available values: tabs | buttons
        style: tabs
        # Choose a comment system to be displayed by default.
        # Available values: disqus | disqusjs | changyan | livere | gitalk | utterances
        active: gitalk
        # Setting `true` means remembering the comment system selected by the visitor.
        storage: true
        # Lazyload all comment systems.
        lazyload: false
        # Modify texts or order for any naves, here are some examples.
        nav:
            gitalk:
                order: -2
            disqus:
                text: Load Disqus
                order: -1

é…ç½®gitalk:

    # Gitalk
    # For more information: https://gitalk.github.io
    gitalk:
        enable: true
        github_id: w-t-w # GitHub repo owner
        repo: w-t-w.github.io # Repository name to store issues
        client_id: 1191ab5290535c1acb09 # GitHub Application Client ID
        client_secret: 8d2cbebac1ae1230f84d1f9f7a36f8008a42c14b # GitHub Application Client Secret
        admin_user: w-t-w # GitHub repo owner and collaborators, only these guys can initialize gitHub issues
        distraction_free_mode: true # Facebook-like distraction free mode
        # When the official proxy is not available, you can change it to your own proxy address
        proxy: https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token
        # proxy: login/oauth/access_token # This is official proxy address
        # Gitalk's display language depends on user's browser or system environment
        # If you want everyone visiting your site to see a uniform language, you can set a force language value
        # Available values: en | es-ES | fr | ru | zh-CN | zh-TW
        language: zh-CN

ä¸Šé¢çš„é…ç½®é¡¹ä¸­æœ‰å‡ ä¸ªéœ€è¦è¯´æ˜çš„ï¼š

* client_id ä¸ client_secret æ˜¯ Github çš„ OAuth è®¤è¯(ä¸‹ä¸€ä¸ªéƒ¨åˆ†ä¼šä»‹ç»).
* github_id ä¸ admin_user è¿™é‡Œå»ºè®®å¡«ä¸€æ ·,å¡«æˆä¸ªäººçš„ github è´¦å·å(ä¸æ˜¯é‚®ç®±,ä¹Ÿä¸æ˜¯ç”¨æˆ·å).
* proxy é»˜è®¤å³æ˜¯ä¸Šé¢çš„åœ°å€,å®ƒå…¶å®ä¼šå›è°ƒåˆ°è¿™é‡Œ <a href='https://github.com/login/oauth/access_token'>https://github.com/login/oauth/access_token</a>.
* æ— è®ºæ˜¯éƒ¨ç½²è‡³ GitHub Page ä¸ªäººç½‘ç«™,è¿˜æ˜¯éƒ¨ç½²è‡³ä¸ªäººç”³è¯·è´­ä¹°çš„äº‘æœåŠ¡å™¨,ä¸Šé¢ä¸‰ç‚¹æ˜¯å¿…é¡»è¦å®è¡Œçš„,proxy 403 é—®é¢˜ä¸»è¦æ˜¯åœ¨éƒ¨ç½²è‡³ä¸ªäººç”³è¯·è´­ä¹°çš„äº‘æœåŠ¡å™¨ä¸­æ—¶ä¼šé‡åˆ°,è€Œéƒ¨ç½²è‡³ GitHub Page ä¸ªäººç½‘ç«™ä¸èƒ½è¿›è¡Œè‡ªå®šä¹‰é…ç½®åå‘ä»£ç†,æ‰€ä»¥åªèƒ½ä½¿ç”¨ Gitalk å®˜æ–¹æ­å»ºçš„ä»£ç†.

ä¸€. Github çš„ OAuth è®¤è¯.

å‰ææ˜¯å¾—æœ‰ä¸€ä¸ª github è´¦å·,æ‰èƒ½æ³¨å†Œ OAuth application ,è¿™æ˜¯<a href='https://github.com/settings/applications/new'> OAuth åº”ç”¨æ³¨å†Œåœ°å€</a>.

![](https://image.white-than-wood.zone/hexo/github_auth_registers.png)

PS: å¦‚æœæœ‰è‡ªå®šä¹‰åŸŸå(å¦‚ä¸ªäººç”³è¯·çš„é˜¿é‡Œäº‘åŸŸå),åˆ™åœ¨ä¸Šå›¾ä¸­å¡«å…¥è‡ªå®šä¹‰åŸŸå.

æ³¨å†Œä¹‹å,ç‚¹å‡»ä¸‹å›¾ä¸­'Generate a new client secret'æŒ‰é’®,åœ¨ä¸ªäººè´¦å·ä¸‹çš„Settings -> Developer settings -> OAuth Appsä¸‹é¢å¯ä»¥æŸ¥çœ‹ OAuth è®¤è¯ client_id ä¸ client_secret.

![](https://image.white-than-wood.zone/hexo/developer_setting.png)

äºŒ. Gitalk è‡ªåŠ¨åˆå§‹åŒ–.

åŸç†: é€šè¿‡ sitemap ä¸­çš„ä¿¡æ¯,è¯·æ±‚ github å¼€æ”¾ api è¾¾åˆ°è‡ªåŠ¨äº§ç”Ÿ issues çš„ç›®çš„.
åŸºæœ¬çš„è¦æ±‚: github API éœ€è¦è¯·æ±‚ token.

* ç”³è¯· github Token.

  æˆ‘ä»¬éœ€è¦ä½¿ç”¨ Personal access tokens æ–¹å¼,è¿™ç§æ–¹å¼é™åˆ¶æ¯å°æ—¶5000æ¬¡,ç»“åˆç¼“å­˜åŠŸèƒ½,åŸºæœ¬æ»¡è¶³éœ€æ±‚.
  ä» Github çš„ <a href='https://github.com/settings/tokens'>Personal access tokens</a> é¡µé¢,ç‚¹å‡» <a href='https://github.com/settings/tokens/new'>Generate new token</a>.

![](https://image.white-than-wood.zone/hexo/access_tokens.png)

* å®‰è£… npm ä¾èµ–é¡¹.

      npm i -D md5 moment request xml-parser
      npm i -S hexo-generator-sitemap

* é…ç½® sitemap.

  åœ¨æ ¹ç›®å½•ä¸­åˆ›å»º sitemap_template.xml.

  ```xml
  <?xml version="1.0" encoding="UTF-8"?>
  <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    {% for post in posts %}
    <url>
      <loc>{{ post.permalink | uriencode }}</loc>
      {% if post.updated %}
      <lastmod>{{ post.updated.toISOString() }}</lastmod>
      {% elif post.date %}
      <lastmod>{{ post.date.toISOString() }}</lastmod>
      {% endif %}
      <date>{{ post.date }}</date>
      <title>{{ post.title + ' | ' + config.title }}</title>
      {# nunjucks æ¨¡ç‰ˆè¯­æ³• https://github.com/mozilla/nunjucks #}
      <desc>{{ post.description | default(post.excerpt) | default(post.content) | default(config.description) | striptags | truncate(200, true, '') }}</desc>
    </url>
    {% endfor %}
  </urlset>
  ```

* ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ _config.yml.
    
      #Sitemap
      sitemap:
        path: sitemap.xml
        template: ./sitemap_template.xml
        rel: false
        tag: true
        category: false

* ç”Ÿæˆ sitemap.xml ç”Ÿäº§ç¯å¢ƒæ–‡ä»¶.

      hexo clean && hexo generate

* æ ¹ç›®å½•æ·»åŠ  talk-auto-init.js (æ³¨æ„è¿˜æ˜¯ä¸è¦å°†æ­¤æ–‡ä»¶ç½®äºgithubä¸­,å»ºè®®ignore).

  ```javascript
  const fs = require('fs');
  const path = require('path');
  const url = require('url');
  
  const request = require('request');
  const xmlParser = require('xml-parser');
  const md5 = require('md5');
  
  // é…ç½®ä¿¡æ¯
  const config = {
    username: 'w-t-w', // GitHub repository æ‰€æœ‰è€…ï¼Œå¯ä»¥æ˜¯ä¸ªäººæˆ–è€…ç»„ç»‡ã€‚å¯¹åº” Gitalk é…ç½®ä¸­çš„ owner
    repo: "w-t-w.github.io", // å‚¨å­˜è¯„è®º issue çš„ github ä»“åº“åï¼Œä»…éœ€è¦ä»“åº“åå­—å³å¯ã€‚å¯¹åº” Gitalk é…ç½®ä¸­çš„ repo
    token: 'ghp_EuXHDkOxxxxxxxxxxxxxxxxxxxxxxxxxxxxx', // å‰é¢ç”³è¯·çš„ personal access token
    sitemap: path.join(__dirname, './public/sitemap.xml'), // ä¸ªäººç«™ç‚¹çš„ sitemap æ–‡ä»¶åœ°å€
    cache: true, // æ˜¯å¦å¯ç”¨ç¼“å­˜ï¼Œå¯ç”¨ç¼“å­˜ä¼šå°†å·²ç»åˆå§‹åŒ–çš„æ•°æ®å†™å…¥é…ç½®çš„ gitalkCacheFile æ–‡ä»¶ï¼Œä¸‹ä¸€æ¬¡ç›´æ¥é€šè¿‡ç¼“å­˜æ–‡ä»¶åˆ¤æ–­
    gitalkCacheFile: path.join(__dirname, './gitalk-init-cache.json'), // ç”¨äºä¿å­˜ gitalk å·²ç»åˆå§‹åŒ–çš„ id åˆ—è¡¨
    gitalkErrorFile: path.join(__dirname, './gitalk-init-error.json'), // ç”¨äºä¿å­˜ gitalk åˆå§‹åŒ–æŠ¥é”™çš„æ•°æ®
  };
  
  const api = 'https://api.github.com/repos/' + config.username + '/' + config.repo + '/issues';
  
  /**
   * è¯»å– sitemap æ–‡ä»¶
     * è¿œç¨‹ sitemap æ–‡ä»¶è·å–å¯å‚è€ƒ https://www.npmjs.com/package/sitemapper
     */
  const sitemapXmlReader = (file) => {
      try {
        const data = fs.readFileSync(file, 'utf8');
        const sitemap = xmlParser(data);
        let ret = [];
        sitemap.root.children.forEach(function (url) {
          const loc = url.children.find(function (item) {
            return item.name === 'loc';
          });
          if (!loc) {
            return false;
          }
          const title = url.children.find(function (item) {
            return item.name === 'title';
          });
          const desc = url.children.find(function (item) {
            return item.name === 'desc';
          });
          const date = url.children.find(function (item) {
            return item.name === 'date';
          });
          ret.push({
            url: loc.content,
            title: title.content,
            desc: desc.content,
            date: date.content,
          });
        });
        return ret;
      } catch (e) {
        return [];
      }
  };
  
  // è·å– gitalk ä½¿ç”¨çš„ id
  const getGitalkId = ({
                         url: u,
                         date
                       }) => {
    const link = url.parse(u);
    // é“¾æ¥ä¸å­˜åœ¨ï¼Œä¸éœ€è¦åˆå§‹åŒ–
    if (!link || !link.pathname) {
      return false;
    }
    if (!date) {
      return false;
    }
    return md5(link.pathname);
  };
  
  /**
   * é€šè¿‡ä»¥è¯·æ±‚åˆ¤æ–­æ˜¯å¦å·²ç»åˆå§‹åŒ–
     * @param {string} gitalk åˆå§‹åŒ–çš„id
     * @return {[boolean, boolean]} ç¬¬ä¸€ä¸ªå€¼è¡¨ç¤ºæ˜¯å¦å‡ºé”™ï¼Œç¬¬äºŒä¸ªå€¼ false è¡¨ç¤ºæ²¡åˆå§‹åŒ–ï¼Œ true è¡¨ç¤ºå·²ç»åˆå§‹åŒ–
     */
  const getIsInitByRequest = (id) => {
      const options = {
        headers: {
          'Authorization': 'token ' + config.token,
          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
          'Accept': 'application/json'
        },
        url: api + '?labels=' + id + ',Gitalk',
        method: 'GET'
      };
      return new Promise((resolve) => {
        request(options, function (err, response, body) {
          if (err) {
            return resolve([err, false]);
          }
          if (response.statusCode != 200) {
            return resolve([response, false]);
          }
          const res = JSON.parse(body);
          if (res.length > 0) {
            return resolve([false, true]);
          }
          return resolve([false, false]);
        });
      });
  };
  
  /**
   * é€šè¿‡ç¼“å­˜åˆ¤æ–­æ˜¯å¦å·²ç»åˆå§‹åŒ–
     * @param {string} gitalk åˆå§‹åŒ–çš„id
     * @return {boolean} false è¡¨ç¤ºæ²¡åˆå§‹åŒ–ï¼Œ true è¡¨ç¤ºå·²ç»åˆå§‹åŒ–
     */
  const getIsInitByCache = (() => {
      // åˆ¤æ–­ç¼“å­˜æ–‡ä»¶æ˜¯å¦å­˜åœ¨
      let gitalkCache = false;
      try {
        gitalkCache = require(config.gitalkCacheFile);
      } catch (e) {}
      return function (id) {
        if (!gitalkCache) {
          return false;
        }
        if (gitalkCache.find(({
                                id: itemId
                              }) => (itemId === id))) {
          return true;
        }
        return false;
      };
  })();
  
  // æ ¹æ®ç¼“å­˜ï¼Œåˆ¤æ–­é“¾æ¥æ˜¯å¦å·²ç»åˆå§‹åŒ–
  // ç¬¬ä¸€ä¸ªå€¼è¡¨ç¤ºæ˜¯å¦å‡ºé”™ï¼Œç¬¬äºŒä¸ªå€¼ false è¡¨ç¤ºæ²¡åˆå§‹åŒ–ï¼Œ true è¡¨ç¤ºå·²ç»åˆå§‹åŒ–
  const idIsInit = async (id) => {
    if (!config.cache) {
      return await getIsInitByRequest(id);
    }
    // å¦‚æœé€šè¿‡ç¼“å­˜æŸ¥è¯¢åˆ°çš„æ•°æ®æ˜¯æœªåˆå§‹åŒ–ï¼Œåˆ™å†é€šè¿‡è¯·æ±‚åˆ¤æ–­æ˜¯å¦å·²ç»åˆå§‹åŒ–ï¼Œé˜²æ­¢å¤šæ¬¡åˆå§‹åŒ–
    if (getIsInitByCache(id) === false) {
      return await getIsInitByRequest(id);
    }
    return [false, true];
  };
  
  // åˆå§‹åŒ–
  const gitalkInit = ({
                        url,
                        id,
                        title,
                        desc
                      }) => {
    //åˆ›å»ºissue
    const reqBody = {
      'title': title,
      'labels': [id, 'Gitalk'],
      'body': url + '\r\n\r\n' + desc
    };
  
    const options = {
      headers: {
        'Authorization': 'token ' + config.token,
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36',
        'Accept': 'application/json',
        'Content-Type': 'application/json;charset=UTF-8'
      },
      url: api,
      body: JSON.stringify(reqBody),
      method: 'POST'
    };
    return new Promise((resolve) => {
      request(options, function (err, response, body) {
        if (err) {
          return resolve([err, false]);
        }
        if (response.statusCode != 201) {
          return resolve([response, false]);
        }
        return resolve([false, true]);
      });
    });
  };
  
  
  /**
   * å†™å…¥å†…å®¹
     * @param {string} fileName æ–‡ä»¶å
     * @param {string} content å†…å®¹
     */
  const write = async (fileName, content, flag = 'w+') => {
      return new Promise((resolve) => {
        fs.open(fileName, flag, function (err, fd) {
          if (err) {
            resolve([err, false]);
            return;
          }
          fs.writeFile(fd, content, function (err) {
            if (err) {
              resolve([err, false]);
              return;
            }
            fs.close(fd, (err) => {
              if (err) {
                resolve([err, false]);
                return;
              }
            });
            resolve([false, true]);
          });
        });
      });
  };
  
  const init = async () => {
    const urls = sitemapXmlReader(config.sitemap);
    // æŠ¥é”™çš„æ•°æ®
    const errorData = [];
    // å·²ç»åˆå§‹åŒ–çš„æ•°æ®
    const initializedData = [];
    // æˆåŠŸåˆå§‹åŒ–æ•°æ®
    const successData = [];
    for (const item of urls) {
      const {
        url,
        date,
        title,
        desc
      } = item;
      const id = getGitalkId({
        url,
        date
      });
      if (!id) {
        console.log(`id: ç”Ÿæˆå¤±è´¥ [ ${id} ] `);
        errorData.push({
          ...item,
          info: 'id ç”Ÿæˆå¤±è´¥',
        });
        continue;
      }
      const [err, res] = await idIsInit(id);
      if (err) {
        console.log(`Error: æŸ¥è¯¢è¯„è®ºå¼‚å¸¸ [ ${title} ] , ä¿¡æ¯ï¼š`, err || 'æ— ');
        errorData.push({
          ...item,
          info: 'æŸ¥è¯¢è¯„è®ºå¼‚å¸¸',
        });
        continue;
      }
      if (res === true) {
        // console.log(`--- Gitalk å·²ç»åˆå§‹åŒ– --- [ ${title} ] `);
        initializedData.push({
          id,
          url,
          title,
        });
        continue;
      }
      console.log(`Gitalk åˆå§‹åŒ–å¼€å§‹... [ ${title} ] `);
      const [e, r] = await gitalkInit({
        id,
        url,
        title,
        desc
      });
      if (e || !r) {
        console.log(`Error: Gitalk åˆå§‹åŒ–å¼‚å¸¸ [ ${title} ] , ä¿¡æ¯ï¼š`, e || 'æ— ');
        errorData.push({
          ...item,
          info: 'åˆå§‹åŒ–å¼‚å¸¸',
        });
        continue;
      }
      successData.push({
        id,
        url,
        title,
      });
      console.log(`Gitalk åˆå§‹åŒ–æˆåŠŸ! [ ${title} ] - ${id}`);
      continue;
    }
  
    console.log(''); // ç©ºè¾“å‡ºï¼Œç”¨äºæ¢è¡Œ
    console.log('--------- è¿è¡Œç»“æœ ---------');
    console.log(''); // ç©ºè¾“å‡ºï¼Œç”¨äºæ¢è¡Œ
  
    if (errorData.length !== 0) {
      console.log(`æŠ¥é”™æ•°æ®ï¼š ${errorData.length} æ¡ã€‚å‚è€ƒæ–‡ä»¶ ${config.gitalkErrorFile}ã€‚`);
      await write(config.gitalkErrorFile, JSON.stringify(errorData, null, 2));
    }
  
    console.log(`æœ¬æ¬¡æˆåŠŸï¼š ${successData.length} æ¡ã€‚`);
  
    // å†™å…¥ç¼“å­˜
    if (config.cache) {
      console.log(`å†™å…¥ç¼“å­˜ï¼š ${(initializedData.length + successData.length)} æ¡ï¼Œå·²åˆå§‹åŒ– ${initializedData.length} æ¡ï¼Œæœ¬æ¬¡æˆåŠŸï¼š ${successData.length} æ¡ã€‚å‚è€ƒæ–‡ä»¶ ${config.gitalkCacheFile}ã€‚`);
      await write(config.gitalkCacheFile, JSON.stringify(initializedData.concat(successData), null, 2));
    } else {
      console.log(`å·²åˆå§‹åŒ–ï¼š ${initializedData.length} æ¡ã€‚`);
    }
  };
  
  init();
  ```
   
- ä¿®æ”¹ package.json ä¸­ scripts ä¸­çš„è„šæœ¬,æ·»åŠ  "gitalk":"node talk-auto-init.js".

  ```json
  {
    "scripts": {
      "clean": "hexo clean",
      "publish": "git push && yarn run clean && hexo generate -d",
      "server": "hexo server",
      "start": "yarn run clean && yarn run server -p 9777",
      "gitalk": "node talk-auto-init.js"
    }
  }
  ```

- æµ‹è¯• gitalk.

      yarn run gitalk

- å·²ç»ç¼“å­˜è¿‡åçš„ç»“æœ:

      hexo-site@0.0.0 gitalk
      node talk-auto-init.js
      --------- è¿è¡Œç»“æœ ---------
      æœ¬æ¬¡æˆåŠŸï¼š 0 æ¡ã€‚
      å†™å…¥ç¼“å­˜ï¼š 7 æ¡ï¼Œå·²åˆå§‹åŒ– 7 æ¡ï¼Œæœ¬æ¬¡æˆåŠŸï¼š 0 æ¡ã€‚å‚è€ƒæ–‡ä»¶ /Users/wtw/frontEnd/w-t-w.github.io/gitalk-init-cache.json.

> proxy 403é”™è¯¯

éƒ¨ç½²è‡³ä¸ªäººç”³è¯·è´­ä¹°çš„äº‘æœåŠ¡å™¨æ—¶,ç”±äºè·¨åŸŸé—®é¢˜,ä¼šå‡ºç° proxy 403 forbidden.è§£å†³å®ƒä¸»è¦æœ‰è¿™ä¹ˆå‡ ä¸ªæ–¹æ¡ˆ.

* nginxåå‘ä»£ç† è§£å†³æ–¹æ¡ˆ(æ¨è).

  åœ¨äº‘æœåŠ¡å™¨ nginx çš„åšå®¢é…ç½®ä¸­åŠ å…¥å¦‚ä¸‹å†…å®¹(æ³¨æ„ä¸ªäººåšå®¢çš„åŸŸåå¿…é¡»ç»è¿‡ https ssl å®‰å…¨è¯ä¹¦å¤‡æ¡ˆ).

    ```shell
    server {
        listen 443 ssl http2;
        #...
        location = /login/oauth/access_token {
            add_header Access-Control-Allow-Origin 'https://white-than-wood.zone/';  //è¿™é‡Œæ”¹æˆä¸ªäººçš„åŸŸå,å¹¶åˆ é™¤æ³¨é‡Š
            add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
            add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization';
            if ($request_method = 'OPTIONS') {
                  return 204;
            }
            proxy_pass https://github.com/;
        }
        #...
    }
    ```

  PS: nginx åå‘ä»£ç†ä¹‹å,è¦å°† proxy æŒ‡å‘ä»£ç†åŸŸåä¸‹çš„é“¾æ¥å›è°ƒè¿›è¡Œä¿®æ”¹.

      proxy: https://white-than-wood.zone/https://github.com/login/oauth/access_token

* è‡ªå»ºä¸€ä¸ª workers.

  åœ°å€: <a href='https://workers.cloudflare.com/'>CloudFlare Workers</a>.
  å‚è€ƒæ–‡ç« : <a href='https://blog.dsrkafuu.net/post/2020/cloudflare-worker-cors-anywhere/'>ä½¿ç”¨ CloudFlare Workers å®ç° CORS Anywhere</a>.

* ä½¿ç”¨å…¶ä»–äººæ­å»ºçš„ä»£ç†.

  æ¯”å¦‚è¿™ä¸ª <a href='https://github.com/gitalk/gitalk/issues/429#issuecomment-778291781'>issues</a> ä»‹ç»åˆ°çš„:

       proxy: https://shielded-brushlands-08810.herokuapp.com/https://github.com/login/oauth/access_token

* ä½¿ç”¨ Gitalk å®˜æ–¹æ­å»ºçš„ä»£ç†.

  æ®gitalk issue<a href='https://github.com/gitalk/gitalk/issues/433'> gitalk æˆæƒç™»å½•åæŠ¥é”™ 403</a>,ç›´æ¥å°†ä½¿ç”¨ Gitalk å®˜æ–¹æ­å»ºçš„ä»£ç†å°±å¯è§£å†³ 403 forbidden çš„é—®é¢˜,ä¹‹å‰ Gitalk å®˜æ–¹æ­å»ºçš„ä»£ç†ç”±äºå¤ªå¤šäººæ¥å…¥å¯¼è‡´è¢«å®˜æ–¹é™åˆ¶ä½¿ç”¨,ç”¨æˆ·ç»å¸¸å‘ç°ä¸èƒ½æ­£å¸¸ä½¿ç”¨,ç°åœ¨å·²ç»å¯¹ä»£ç†è¿›è¡Œä¼˜åŒ–æ”¹è¿›,ä¸ä¼šå‡ºç°é™åˆ¶ä½¿ç”¨çš„æƒ…å†µ.

  ![](https://image.white-than-wood.zone/hexo/gitalk_403.png)

       https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token

* æ›´æ–° gitalk ç‰ˆæœ¬è‡³1.7.2.

  æ®gitalk issue<a href='https://github.com/gitalk/gitalk/issues/433'> gitalk æˆæƒç™»å½•åæŠ¥é”™ 403</a>,ç›´æ¥å°† gitalk ç‰ˆæœ¬å‡çº§è‡³ 1.7.2 å°±å¯è§£å†³ 403 forbidden çš„é—®é¢˜.

  ![](https://image.white-than-wood.zone/hexo/gitalk_403.png)

#### hexo å…¶ä»–é…ç½®

> ç¤ºä¾‹

åœ¨æ ¹ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶ä¸­æ›´æ”¹ç½‘ç«™title(æ ‡é¢˜)ã€author(ä½œè€…)ã€keywords(å…³é”®å­—)ã€description(æè¿°)é…ç½®,æ¯”å¦‚æœ¬äººçš„é…ç½®.

    title: wtw's Frontend
    author: wtw(æ¯”æœ¨ç™½)
    keywords: hexo,hexo blog,webpack
    subtitle: é“é˜»ä¸”é•¿,è¡Œåˆ™å°†è‡³
    description: å‰ç«¯é¢†åŸŸå†…æ‰€ä¸çŸ¥é“çš„éƒ½æ¢ç´¢äºæ­¤!

å†ä¸»é¢˜ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶é‡è®¾ç½®ä¸ªäººçš„github(githubæ‰˜ç®¡ä»£ç ç½‘å€)ã€google(googleä¸ªäººèµ„æ–™ç½‘å€)ã€gmail(gmailé‚®ç®±ç½‘å€)
ã€twitter(twitterä¸ªäººå¾®åšç½‘å€)ç­‰ç­‰,æ¯”å¦‚æœ¬äººçš„é…ç½®.

    social:
      GitHub: https://github.com/w-t-w || fab fa-github
      E-Mail: https://dreamthen.00@gmail.com || fab fa-envelope
      Google: https://plus.google.com/u/0/103833130011211353424 || fab fa-google

å‘å¸ƒåˆ° GitHub Page ä¸Šä¹‹å,ä½ ä¼šå‘ç° README.md è«åçš„æ¶ˆå¤±,ä¸»è¦æ˜¯å› ä¸º hexo æ„å»ºå‘å¸ƒåˆ°è¿œç¨‹çš„ç›®å½•åªæ˜¯ source ç›®å½•,æ‰€ä»¥åªè¦å°†
README.md copy ä¸€ä»½æ”¾åˆ° source ç›®å½•ä¸‹,å¹¶ä¸”é…ç½®æ¸²æŸ“æ—¶éœ€è¦è·³è¿‡çš„æ–‡ä»¶å°±å¯ä»¥äº†.

    #hexo æ„å»ºæ¸²æŸ“æ—¶ä¼šå°† source ç›®å½•ä¸‹ markdown ç±»å‹æ–‡ä»¶è½¬è¯‘ä¸º html,æˆ‘ä»¬ä¸éœ€è¦å°† README.md è½¬è¯‘,æ‰€ä»¥ç›´æ¥ skip render
    #æ›´æ”¹æ ¹ç›®å½•åº•ä¸‹çš„ _config.yml æ–‡ä»¶,ä¿®æ”¹ skip_render å±æ€§
    skip_render: README.md

å½“åˆ›ä½œä¸­å›¾ç‰‡è¿‡å°,é˜…è¯»è€…æ— æ³•çœ‹æ¸…çš„æƒ…å†µä¸‹,æ”¾å¤§é…ç½®å°±å·²ç„¶æˆä¸ºå¿…è¦ .fancybox
é…ç½®å¯ä»¥ç‚¹å‡»ä½¿å›¾ç‰‡æ”¾å¤§,å¹¶å¯åŒæ—¶æŸ¥çœ‹å…¨æ–‡çš„å›¾ç‰‡.æ›´æ”¹ä¸»é¢˜ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶ fancybox å±æ€§.

    # FancyBox is a tool that offers a nice and elegant way to add zooming functionality for images.
    # For more information: https://fancyapps.com/fancybox/
    fancybox: true
